data = [
  {
    rupeeSign: "₹",
    before_discount: "₹289",
    MRP: 254,
    name: "FAME FOREVER Men Solid Vests- Pack Of 2",
    type: "Vests",
    brand: "Fame Forever",
    color: "White",
    fabric: "Cotton",
    size: "S",
    discount: "10%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000010245944-White-White-1000010245944_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹699",
    MRP: 628,
    name: "FAME FOREVER Men Checked Woven Boxers - Pack Of 2",
    type: "Boxers",
    brand: "Fame Forever",
    color: "Green",
    fabric: "Cotton",
    size: "S",
    discount: "10%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000010040811-Green-Olive-1000010040811_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹319",
    MRP: 289,
    name: "VAN HEUSEN Solid Cotton Stretch Trunks - Assorted Colour & Design",
    type: "Trunks",
    brand: "Van Heusen",
    color: "Grey",
    fabric: "Cotton Blend",
    size: "S",
    discount: "10%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000006015667-12122017-Grey-Mix-1000006015667-12122017_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹1153",
    MRP: 1049,
    name: "Jockey Men Solid Lounge Pants",
    type: "Lounge Pants",
    brand: "Jockey",
    color: "Blue",
    fabric: "Cotton Blend",
    size: "S",
    discount: "10%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000009222127-Blue-Navy-1000009222127_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹529",
    MRP: 449,
    name: "JOCKEY Men Printed Vest",
    type: "Vests",
    brand: "Jockey",
    color: "Blue",
    fabric: "Cotton",
    size: "L",
    discount: "20%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000009220790-Blue-Navy-1000009220790_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹499",
    MRP: 409,
    name: "Jack & Jones Typographic Print Cotton Vests",
    type: "Vests",
    brand: "Jack and Jones",
    color: "Blue",
    fabric: "Polyamide",
    size: "M",
    discount: "20%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000007844790-Blue-NAVY-1000007844790_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹569",
    MRP: 449,
    name: "Van Heusen Men Printed Cotton Vest",
    type: "Vests",
    brand: "Van Heusen",
    color: "Orange",
    fabric: "Polyamide",
    size: "XL",
    discount: "30%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000009220795-Orange-Orange-1000009220795_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹759",
    MRP: 628,
    name: "Jockey Printed Woven Boxers - Pack Of 2",
    type: "Boxers",
    brand: "Jockey",
    color: "Grey",
    fabric: "Cotton Blend",
    size: "M",
    discount: "20%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000009931324-Grey-Grey-1000009931324_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹909",
    MRP: 699,
    name: "Jack & Jones Men Printed Boxers - Pack Of 2",
    type: "Boxers",
    brand: "Jack and Jones",
    color: "Blue",
    fabric: "Cotton",
    size: "L",
    discount: "30%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000009931335-Blue-Navy-1000009931335_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹769",
    MRP: 649,
    name: "Van Heusen Men Boxers",
    type: "Boxers",
    brand: "Van Heusen",
    color: "Black",
    fabric: "Cotton",
    size: "XL",
    discount: "20%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000004175206-Black-Black-1000004175206_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹479",
    MRP: 399,
    name: "JOCKEY Supima Cotton Panelled Trunks",
    type: "Trunks",
    brand: "Jockey",
    color: "Green",
    fabric: "Polyamide",
    size: "M",
    discount: "20%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000007685805-Var2705-Blue-Dark-Blue-1000007685805-Var2705_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹389",
    MRP: 299,
    name: "Fame Forever Briefs - ASSORTED Colour & Design",
    type: "Trunks",
    brand: "Fame Forever",
    color: "Orange",
    fabric: "Cotton Blend",
    size: "L",
    discount: "30%",
    image_url:
      "https://6c819239693cc4960b69-cc9b957bf963b53239339d3141093094.lmsin.net/1000005320344-Var0802-Red-Mix-1000005320344-Var0802_01-345.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹384",
    MRP: 349,
    name: "Jack & Jones ASSORTED Colour & Design",
    type: "Trunks",
    brand: "Jack and Jones",
    color: "Grey",
    fabric: "Cotton",
    size: "XL",
    discount: "10%",
    image_url:
      "https://6c819239693cc4960b69-cc9b957bf963b53239339d3141093094.lmsin.net/1000004499253-1608-Grey-Mix-1000004499253-1608_01-345.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹752",
    MRP: 628,
    name: "FAME FOREVER Men Solid Lounge Pants",
    type: "Lounge Pants",
    brand: "Fame Forever",
    color: "Grey",
    fabric: "Cotton",
    size: "M",
    discount: "20%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000010365592-Grey-1000010365592_01-2100.jpg",
  },
  {
    rupeeSign: "₹",
    before_discount: "₹1589",
    MRP: 1299,
    name: "Men Solid Slim Fit Lounge Track Pants",
    type: "Lounge Pants",
    brand: "Van Heusen",
    color: "Black",
    fabric: "Cotton",
    size: "L",
    discount: "30%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000009220780-Grey-DarkGrey-1000009220780_01-2100.jpg",
  },

  {
    rupeeSign: "₹",
    before_discount: "₹1209",
    MRP: 1099,
    name: "Jack & JonesMen Printed Lounge Pants",
    type: "Lounge Pants",
    brand: "Jack and Jones",
    color: "Orange",
    fabric: "Polyamide",
    size: "XL",
    discount: "10%",
    image_url:
      "https://lmsin.net/cdn-cgi/image/h=493,w=333,q=60,fit=cover/https://aaeff43fe32172cbcecc-ae2a4e9a8cbc330ede5588dedf56886e.lmsin.net/lifestyle/1000006632088-Var1710-Red-Dark-Red-1000006632088-Var1710_01-2100.jpg",
  },
];

localStorage.setItem("storageData", JSON.stringify(data));
var products = JSON.parse(localStorage.getItem("storageData"));
var cartStorage = JSON.parse(localStorage.getItem("cartStorageData")) || [];
var count = products.length;
document.getElementById("num").textContent = count;

function sortBy() {
  var selected = document.getElementById("selectRelevance").value;
  console.log("hi");
  if (selected == "low") {
    products = products.sort(function (a, b) {
      return a.MRP - b.MRP;
    });
  }
  if (selected == "high") {
    products = products.sort(function (a, b) {
      return b.MRP - a.MRP;
    });
  }
  if (selected == "alphabetical") {
    console.log(selected);
    products = products.sort(function (a, b) {
      return a.name > b.name ? 1 : b.name > a.name ? -1 : 0;
    });
  }
  show(products);
}

function sortByType() {
  var filter = document.querySelector("#selectedtype");

  var allProduct = JSON.parse(localStorage.getItem("storageData"));
  allProduct = allProduct.filter(function (item) {
    return item.type == filter.value;
  });
  show(allProduct);
}
function sortByPrice() {
  var filter = document.querySelector("#selectedprice");

  var allProduct = JSON.parse(localStorage.getItem("storageData"));
  allProduct = allProduct.filter(function (item) {
    return item.MRP < filter.value;
  });

  show(allProduct);
}
function sortByColor() {
  var filter = document.querySelector("#selectedcolor");

  var allProduct = JSON.parse(localStorage.getItem("storageData"));
  allProduct = allProduct.filter(function (item) {
    return item.color == filter.value;
  });

  show(allProduct);
}
function sortByBrand() {
  var filter = document.querySelector("#selectedbrand");

  var allProduct = JSON.parse(localStorage.getItem("storageData"));
  allProduct = allProduct.filter(function (item) {
    return item.brand == filter.value;
  });

  show(allProduct);
}

var topwareDiv = document.querySelector("#topwareProductsDiv");
var mainDiv = document.createElement("div");
mainDiv.setAttribute("id", "containerProduct");

topwareDiv.append(mainDiv);

show(products);
function show(products) {
  var count = products.length;
  document.getElementById("num").textContent = count;
  mainDiv.innerHTML = "";
  products.map(function (item) {
    var imageDiv = document.createElement("div");
    imageDiv.setAttribute("id", "imageDivProducts");
    var img = document.createElement("img");
    img.setAttribute("src", item.image_url);
    img.setAttribute("id", "productImage");

    var mrpDiv = document.createElement("div");
    mrpDiv.setAttribute("id", "mrpDivArea");
    var rupeeSign = document.createElement("span");
    rupeeSign.setAttribute("id", "signRupee");
    rupeeSign.textContent = item.rupeeSign;
    var h2 = document.createElement("h2");
    h2.setAttribute("id", "afterDiscount");
    h2.textContent = item.MRP;
    var originalMRP = document.createElement("span");
    originalMRP.setAttribute("id", "originalPrice");
    originalMRP.textContent = item.before_discount;
    var textDiv = document.createElement("div");
    textDiv.setAttribute("id", "textDivProducts");
    var h1 = document.createElement("a");
    h1.setAttribute("id", "anchorName");
    h1.setAttribute("href", "#");
    h1.textContent = item.name;

    // var selectTag = document.createElement("select");
    // selectTag.setAttribute("id", "sel");

    // var option1 = document.createElement("option");
    // var option2 = document.createElement("option");
    // var option3 = document.createElement("option");
    // var option4 = document.createElement("option");
    // option1.textContent = "Neutral";
    // option2.textContent = "Blue";
    // option3.textContent = "Red";
    // option4.textContent = "Green";
    // selectTag.setAttribute("onchange", function colorSelect() {
    //   var select = sel.value;
    //   item.color = select;
    //   console.log("here");
    // });
    // selectTag.append(option1, option2, option3, option4);
    var btn = document.createElement("button");
    btn.setAttribute("id", "productBtn");
    btn.textContent = "ADD TO CART";
    btn.addEventListener("click", function () {
      cartData(item);
    });
    mrpDiv.append(rupeeSign, h2, originalMRP);
    textDiv.append(h1);
    imageDiv.append(img, mrpDiv, textDiv, btn);
    mainDiv.append(imageDiv);
  });
}

function cartData(item) {
  var isThere = false;
  for (var i = 0; i < cartStorage.length; i++) {
    if (item === cartStorage[i]) {
      isThere = true;
    } else if (item !== cartStorage[i]) {
      isThere = false;
    }
  }

  if (isThere) alert("Already There");
  else if (!isThere) {
    alert("Product Added");
    cartStorage.push(item);
    localStorage.setItem("cartStorageData", JSON.stringify(cartStorage));
  }
}

var cartProductsForBasket = JSON.parse(localStorage.getItem("cartStorageData"));

document.getElementById("btn").addEventListener("click", function () {
  console.log("hi");
  if (cartProductsForBasket.length > 0) {
    console.log("btn");
    window.location.href = "basket.html";
  }
});
